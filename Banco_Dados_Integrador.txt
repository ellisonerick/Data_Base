CREATE DATABASE IF NOT EXISTS PROJETOAPI;
USE DENGUEAPI;

CREATE TABLE USUARIO(
    ID VARCHAR(255) PRIMARY KEY,
    NOME VARCHAR(255),
    CPF VARCHAR(255),
    IDADE INTEGER,
    EMAIL VARCHAR(255),
    CEP VARCHAR(255),
    ENDERECO VARCHAR(255),
    COMPLEMENTO VARCHAR(255),
    CIDADE VARCHAR(255),
    TELEFONE VARCHAR(255),
    SENHA VARCHAR(255)
);

CREATE TABLE DENUNCIA(
    ID VARCHAR(255) PRIMARY KEY,
    DESCRICAO VARCHAR(255),
    IDFOTOS VARCHAR(255),
    CEP VARCHAR(255),
    ENDERECO VARCHAR(255),
    COMPLEMENTO VARCHAR(255),
    ANONIMATO BOOLEAN,
    IDUSUARIO VARCHAR(255),
);

CREATE TABLE FOTOS(
    ID VARCHAR(255) PRIMARY KEY,
    NOME VARCHAR(255),
    URL VARCHAR(255),
    TAMANHO INTEGER
);

ALTER TABLE DENUNCIA ADD FOREIGN KEY (IDFOTOS) REFERENCES FOTOS(ID);
ALTER TABLE DENUNCIA ADD FOREIGN KEY (IDUSUARIO) REFERENCES USUARIO(ID);


---------------------------------------------------------------------------------------------

AULA 24/04

SELECT COUNT(*),SUM(DURACAO), IDGENERO FROM FILME
GROUP BY IDGENERO
HAVING SUM(DURACAO) >200

SELECT FIL.NOME AS NOME_FILME, GEN.NOME AS NOME_GENERO
FROM FILME FIL 
JOIN GENERO GEN ON GEN.ID = FIL.IDGENERO

SELECT FIL.NOME AS FILME_NOME, GEN.NOME AS GENERO_NOME FROM `filme` FIL
LEFT JOIN GENERO GEN ON GEN.ID = FIL.IDGENERO

SELECT FIL.NOME AS FILME_NOME, GEN.NOME AS GENERO_NOME FROM `filme` FIL
RIGHT JOIN GENERO GEN ON GEN.ID = FIL.IDGENERO

SELECT USU.EMAIL EMAIL_USUARIO, GEN.NOME NOME_GENERO FROM USUARIO AS USU
INNER JOIN ALUGUEL AS AL ON AL.IDUSUARIO = USU.ID
INNER JOIN FILME AS FIL ON FIL.ID = AL.IDFILME
INNER JOIN GENERO AS GEN ON GEN.ID = FIL.IDGENERO
